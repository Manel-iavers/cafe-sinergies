---
import Layout from '../layouts/Layout.astro';
import FormulariAlta from '../components/FormulariAlta';
import { getSectors, getPobles } from '../lib/airtable';

const sectors = await getSectors();
const pobles = await getPobles();
---

<Layout title="Formulari d'alta">
  <header class="bg-primary-500 shadow-lg">
    <div class="max-w-4xl mx-auto px-6 py-4">
      <a href="/" class="flex items-center gap-3">
        <img src="/logoCOLBN.png" alt="Cafè & Sinergies" class="h-10 w-auto" />
        <span class="font-display font-semibold text-xl text-white">Cafè & Sinergies</span>
      </a>
    </div>
  </header>

  <main class="py-12 bg-primary-50 min-h-screen">
    <div class="max-w-2xl mx-auto px-6">
      <div class="text-center mb-8">
        <h1 class="font-display text-3xl font-bold text-gray-900 mb-2">
          Registre a Cafè & Sinergies
        </h1>
        <p class="text-gray-600">
          Omple les teves dades per unir-te a la comunitat
        </p>
      </div>
      
      <FormulariAlta 
        client:load 
        pobles={pobles.map(p => ({ id: p.id, nom: p.fields.Nom, token: p.fields.Token }))}
        sectors={sectors.map(s => ({ id: s.id, nom: s.fields.Nom }))}
      />
    </div>
  </main>
</Layout>
